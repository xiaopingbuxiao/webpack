
### 服务器渲染（SSR）

服务端渲染的流程如如下：
![](./SSR.png)

#### webpack初级配置
在上面的基础上增加 `index.server.js`。同时增加针对`webpack.config.ssr.js`。需要做的步骤包括：
1. 将组件文件改为导出一个组件。
2. 将代码中的 `import` 改为 可以识别的 `require`。
3. 服务端通过针对不同的路由渲染不同的页面。
4. **踩坑：** `webpack` 中增加了 `optimization` 将 `React` 分割为单独的包的时候反而会出现问题。
[SSR具体demo](https://github.com/xiaopingbuxiao/webpack/tree/master/SSR)

存在的问题:

**浏览器器的全局变量量 (Node.js 中没有 document, window)**
* 组件适配:将不不兼容的组件根据打包环境进⾏行行适配
* 请求适配:将 `fetch` 或者 `ajax` 发送请求的写法改成 `isomorphic-fetch` 或者 `axios`
**样式问题 (Node.js ⽆无法解析 css)**
* 方案一:服务端打包通过 `ignore-loader` 忽略略掉 `CSS` 的解析
* ⽅案二:将 `style-loader` 替换成 `isomorphic-style-loader`
