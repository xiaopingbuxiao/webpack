


### 自动清理构建目录
```
rm -rf ./dist && webpack
rimraf ./dist && webpak
```
更加推荐使用 `clean-webpack-plugin` 默认会删除 `output` 指定的输出目录。

[更多关于clean-webpack-plugin使用](https://www.npmjs.com/package/clean-webpack-plugin)


### css 的增强

```shell
npm install postcss-loader autoprefixer -D
```
同时 `webpack` 的 `css` 编译中添加 `postcss-loader`:
```js
module:{
  rules:[
    {
      test: /\.(scss|css)$/,
      use: [
        // 'style-loader',
        miniCssExtractPlugin.loader,
        'css-loader',
        'postcss-loader',
        'sass-loader'
      ]
    },
  ]
}
```

新建 `postcss.config.js`
```js postcss.config.js
module.exports = {
  plugins: [
    require('autoprefixer')
  ]
}
```
新建 `.browserslistrc`
``` .browserslistrc
> 1%
last 2 versions
```

### css 增强（通过 webpack 转换rem 适配）

```js
npm install px2rem-loader lib-flexible -D
```
```js webpack.config.js
module:{
  rules:[
    {
      test:/\.(scss|css)$/,
      use:[
        'style-loader',
        'css-loader',
        'sass-loader',
        {
          loader:'px2rem-loader',
          options:{
            remUnit:75, // 750设计稿
            remPrecesion:8 // 精确度
          }
        }
      ]
    },
  ]
}
```

### 资源内联
代码层面意义：
* 页面框架的初始化脚本（如引入`lib-flexible`）
* 上报相关打点
* css 内联避免页面闪动  

请求层面意义:
* 减少 HTTP 网络请求数量 (小的图片或者字体内联`url-loader `)

#### HTML 和 JS 内联
使用 `raw-loader` 做资源的内联是不能使用过高版本。
```shell
npm i raw-loader@0.5 -D
```
```js
${ require('raw-loader!./meta.html')}
<script>
 ${ require('raw-loader!babel-loader!./node_modules/lib-flexible/flexible.js')}
</script>
```
#### css 的内联
方案一：借助`style-loader`来完成
[具体查看style-loader配置项](https://www.npmjs.com/package/style-loader)

方案二：借助 `html-inline-css-webpack-plugin`
[具体查看html-inline-css-webpack-plugin](https://www.npmjs.com/package/html-inline-css-webpack-plugin)


